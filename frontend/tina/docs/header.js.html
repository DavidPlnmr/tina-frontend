<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: header.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: header.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useEffect } from "react";
import { parseCookies, destroyCookie } from "nookies";
import { useRouter } from "next/router";
import { Navbar, Nav, NavDropdown } from "react-bootstrap";

/**
 * @namespace 'header.js'
 * @description This Header component is used to generate the application's navigation bar. 
 * It contains links for navigating through the application and functionality for user authentication.
 * @returns {JSX.Element} The Header component as a JSX element.
 */
function Header() {
  /**
   * @constant user
   * @memberof 'header.js'
   * @description State variable holding the currently logged-in user's information.
   * @default {{email: "", username: "", last_name: "", first_name: ""}}
   * @property {string} email - The authenticated user's email address.
   * @property {string} username - The authenticated user's username.
   * @property {string} last_name - The authenticated user's last name.
   * @property {string} first_name - The authenticated user's first name.
   */
  const [user, setUser] = useState({
    email: "",
    username: "",
    last_name: "",
    first_name: "",
  });

  /**
   * @constant token
   * @memberof 'header.js'
   * @description State variable holding the currently logged-in user's authentication token.
   * @default null
   */
  const [token, setToken] = useState(null);

  /**
   * @constant router
   * @memberof 'header.js'
   * @description Router object from Next.js' useRouter hook for programmatic navigation.
   */
  const router = useRouter();

   /**
   * @constant cookies
   * @memberof 'header.js'
   * @type {object}
   * @description An object containing all of the user's cookies.
   */
  const cookies = parseCookies();

   /**
   * @function useEffect
   * @memberof 'header.js'
   * @description This useEffect hook sets the token and user's information based on the cookies when the component mounts or updates.
   * @returns {void}
   */
  useEffect(() => {
    setToken(cookies.csrftoken);

    if (token) {
      setUser({
        email: cookies.email,
        username: cookies.username,
        last_name: cookies.last_name,
        first_name: cookies.first_name,
      });
    }
  }, [token]);

  /**
   * @function handleLogout
   * @memberof 'header.js'
   * @description This function handles the user's logout process. It removes all user and session cookies and redirects to the home page.
   * @returns {void}
   */
  const handleLogout = () => {
    Promise.all([
      destroyCookie(null, "id"),
      destroyCookie(null, "csrftoken"),
      destroyCookie(null, "email"),
      destroyCookie(null, "username"),
      destroyCookie(null, "last_name"),
      destroyCookie(null, "first_name"),
      destroyCookie(null, "role"),
    ]).then(() => {
      setTimeout(() => {
        window.location.reload();
      }, 500);
      router.push("/");
    });
  };

  return (
    &lt;>
      &lt;style type="text/css">
        {`
            .navbar {
                background-color: #232627;
                color: #fff;
                min-height: 90px;
            }

            img {
                height: 20%;
            }
        `}
      &lt;/style>
      &lt;header
        style={{ position: "fixed", width: "100%", top: "0", zIndex: "100" }}
      >
        &lt;Navbar collapseOnSelect expand="lg" variant="dark">
          &lt;Navbar.Brand href="/" style={{ marginLeft: "2%" }}>
            &lt;h4>Tina Coiffure&lt;/h4>
          &lt;/Navbar.Brand>
          &lt;Navbar.Toggle aria-controls="responsive-navbar-nav" />
          &lt;Navbar.Collapse id="responsive-navbar-nav">
            &lt;Nav className="ms-auto" style={{ marginRight: "2%" }}>
              &lt;Nav.Link href="/components/prise_rendez_vous/service_rdv">
                Prendre rendez-vous
              &lt;/Nav.Link>
              &lt;Nav.Link href="/">Qui sommes nous ?&lt;/Nav.Link>
              {token ? (
                &lt;NavDropdown title={user.username} id="collasible-nav-dropdown">
                  &lt;NavDropdown.Item href="/components/CRUD_utilisateur/profil_utilisateur">
                    Mon profil
                  &lt;/NavDropdown.Item>
                  &lt;NavDropdown.Item href="/components/CRUD_utilisateur/calendrier_utilisateur">
                    Mes rendez-vous
                  &lt;/NavDropdown.Item>
                  {token &amp;&amp; cookies.role === "admin" &amp;&amp; (
                    &lt;NavDropdown.Item onClick={handleLogout}>
                      Ajout de disponibilités
                    &lt;/NavDropdown.Item>
                  )}
                  &lt;NavDropdown.Item onClick={handleLogout}>
                    Se déconnecter
                  &lt;/NavDropdown.Item>
                &lt;/NavDropdown>
              ) : (
                &lt;Nav.Link href="/components/identification/connexion">
                  S'identifier
                &lt;/Nav.Link>
              )}
            &lt;/Nav>
          &lt;/Navbar.Collapse>
        &lt;/Navbar>
      &lt;/header>{" "}
      &lt;br />
      &lt;br />
      &lt;br />
    &lt;/>
  );
}

export default Header;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="-_calendrier.js_.html">'calendrier.js'</a></li><li><a href="-_calendrier_utilisateur.js_.html">'calendrier_utilisateur.js'</a></li><li><a href="-_choix_client.js_.html">'choix_client.js'</a></li><li><a href="-_confirmation_rdv.js_.html">'confirmation_rdv.js'</a></li><li><a href="-_connexion.js_.html">'connexion.js'</a></li><li><a href="-_header.js_.html">'header.js'</a></li><li><a href="-_inscription.js_.html">'inscription.js'</a></li><li><a href="-_no_client_rdv.js_.html">'no_client_rdv.js'</a></li><li><a href="-_profil_utilisateur.js_.html">'profil_utilisateur.js'</a></li><li><a href="-_recap_rdv.js_.html">'recap_rdv.js'</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed May 17 2023 14:19:15 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
